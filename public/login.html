<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="css/login_register.css">
    <link rel="icon" type="image/png" href="images/favicon.png">
    <script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>
</head>
<body>
    <div class="modal">
        <!-- Info Panel for Desktop -->
        <div class="info-panel">
            <h1>Welcome Back</h1>
            <p>Continue your journey with Cycling Without Age Singapore and help bring joy to seniors in our community.</p>
            
            <div class="info-features">
                <div class="feature">Access volunteer opportunities</div>
                <div class="feature">Manage your event participation</div>
                <div class="feature">Track your contributions</div>
                <div class="feature">Connect with our community</div>
            </div>
        </div>

        <!-- Form Panel -->
        <div class="form-panel">
            <div class="modal-content">
                <!-- Back Button -->
                <a href="main.html" class="back-btn">&#8592;</a>

                <!-- Title -->
                <h2>Login</h2>

                <!-- Form -->
                <form id="loginForm">
                    <!-- Email Address -->
                    <label for="email">Email Address:</label>
                    <input type="email" id="email" name="email" placeholder="Enter your email" required>

                    <!-- Password -->
                    <label for="password">Password:</label>
                    <input type="password" id="password" name="password" placeholder="Enter your password" required>
                    <a href="resetPassword.html" class="forgot-password">Forgot Password?</a>

                    <!-- Sign In Button -->
                    <button type="submit">Sign In</button>
                </form>

                <!-- Create Account -->
                <p>
                    <span>Don't have an account yet?</span>
                    <a href="register.html">Create Account</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Login Successful Modal (pop-up)  -->
    <div id="loginSuccessModal" class="success-modal" style="display: none;">
        <div class="success-modal-content">
            <span class="close-btn" id="closeLoginSuccessModal">&times;</span>
            <h2>Login Successful!</h2>
            
            <!-- Lottie Animation Container -->
            <div class="lottie-container">
                <dotlottie-player 
                    src="https://lottie.host/07d2015e-12bd-4b20-95b3-add530a01150/GJJ27JsCtB.lottie" 
                    background="transparent" 
                    speed="1" 
                    style="width: 200px; height: 200px;"
                    loop 
                    autoplay>
                </dotlottie-player>
            </div>
            
            <p>Redirecting you to the homepage...</p>
        </div>
    </div>

    <!-- Load Firebase SDK first -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAnalytics } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js';
        
        const firebaseConfig = {
            apiKey: "AIzaSyBlN7borlIKXxly09JsFMC9nDKUcvA9bCM",
            authDomain: "cycling-without-age-grp9-cdb.firebaseapp.com",
            projectId: "cycling-without-age-grp9-cdb",
            storageBucket: "cycling-without-age-grp9-cdb.firebasestorage.app",
            messagingSenderId: "559083600036",
            appId: "1:559083600036:web:c0438122b8a56e59f7ce31",
            measurementId: "G-E2KF2YVL7R"
        };

        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        
        // Make available globally
        window.firebaseApp = app;
        window.firebaseAnalytics = analytics;
    </script>
    
    <script src="script/login-script.js"></script>
    <script>
    window.watsonAssistantChatOptions = {
        integrationID: "81bd0f29-c204-4af7-a767-572b59f6f8ca", // The ID of this integration.
        region: "us-south", // The region your integration is hosted in.
        serviceInstanceID: "a87884a3-0fe1-4e3d-9718-0445dc99839c", // The ID of your service instance.
        onLoad: async (instance) => { await instance.render(); }
    };
    setTimeout(function(){
        const t=document.createElement('script');
        t.src="https://web-chat.global.assistant.watson.appdomain.cloud/versions/" + (window.watsonAssistantChatOptions.clientVersion || 'latest') + "/WatsonAssistantChatEntry.js";
        document.head.appendChild(t);
    });
    </script>
</body>
</html>